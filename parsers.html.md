# Notebook and Module Parsing


<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! -->

## Data Models for Parsing

------------------------------------------------------------------------

<a
href="https://github.com/cj-mills/cjm-nbdev-overview/blob/main/cjm_nbdev_overview/parsers.py#L24"
target="_blank" style="float:right; font-size:smaller">source</a>

### FunctionInfo

>  FunctionInfo (name:str, signature:str, docstring:Optional[str]=None,
>                    decorators:List[str]=<factory>, is_exported:bool=False,
>                    is_async:bool=False, source_line:Optional[int]=None)

*Information about a function*

------------------------------------------------------------------------

<a
href="https://github.com/cj-mills/cjm-nbdev-overview/blob/main/cjm_nbdev_overview/parsers.py#L36"
target="_blank" style="float:right; font-size:smaller">source</a>

### VariableInfo

>  VariableInfo (name:str, value:Optional[str]=None,
>                    type_hint:Optional[str]=None, comment:Optional[str]=None,
>                    is_exported:bool=False)

*Information about a module-level variable*

------------------------------------------------------------------------

<a
href="https://github.com/cj-mills/cjm-nbdev-overview/blob/main/cjm_nbdev_overview/parsers.py#L46"
target="_blank" style="float:right; font-size:smaller">source</a>

### ClassInfo

>  ClassInfo (name:str, signature:str, docstring:Optional[str]=None,
>                 methods:List[__main__.FunctionInfo]=<factory>,
>                 decorators:List[str]=<factory>,
>                 attributes:List[__main__.VariableInfo]=<factory>,
>                 is_exported:bool=False, source_line:Optional[int]=None)

*Information about a class*

------------------------------------------------------------------------

<a
href="https://github.com/cj-mills/cjm-nbdev-overview/blob/main/cjm_nbdev_overview/parsers.py#L59"
target="_blank" style="float:right; font-size:smaller">source</a>

### ModuleInfo

>  ModuleInfo (path:pathlib.Path, name:str, title:Optional[str]=None,
>                  description:Optional[str]=None,
>                  functions:List[__main__.FunctionInfo]=<factory>,
>                  classes:List[__main__.ClassInfo]=<factory>,
>                  variables:List[__main__.VariableInfo]=<factory>,
>                  imports:List[str]=<factory>)

*Information about a module (notebook or Python file)*

## AST Parsing Utilities

------------------------------------------------------------------------

<a
href="https://github.com/cj-mills/cjm-nbdev-overview/blob/main/cjm_nbdev_overview/parsers.py#L71"
target="_blank" style="float:right; font-size:smaller">source</a>

### extract_docments_signature

>  extract_docments_signature
>                                  (node:Union[ast.FunctionDef,ast.AsyncFunction
>                                  Def], source_lines:List[str])

*Extract function signature with docments-style comments*

<table>
<thead>
<tr>
<th></th>
<th><strong>Type</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>node</td>
<td>Union</td>
<td>AST function node</td>
</tr>
<tr>
<td>source_lines</td>
<td>List</td>
<td>Source code lines</td>
</tr>
<tr>
<td><strong>Returns</strong></td>
<td><strong>str</strong></td>
<td><strong>Function signature</strong></td>
</tr>
</tbody>
</table>

------------------------------------------------------------------------

<a
href="https://github.com/cj-mills/cjm-nbdev-overview/blob/main/cjm_nbdev_overview/parsers.py#L136"
target="_blank" style="float:right; font-size:smaller">source</a>

### parse_function

>  parse_function (node:Union[ast.FunctionDef,ast.AsyncFunctionDef],
>                      source_lines:List[str], is_exported:bool=False)

*Parse a function definition from AST*

<table>
<thead>
<tr>
<th></th>
<th><strong>Type</strong></th>
<th><strong>Default</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>node</td>
<td>Union</td>
<td></td>
<td>AST function node</td>
</tr>
<tr>
<td>source_lines</td>
<td>List</td>
<td></td>
<td>Source code lines</td>
</tr>
<tr>
<td>is_exported</td>
<td>bool</td>
<td>False</td>
<td>Has #| export</td>
</tr>
<tr>
<td><strong>Returns</strong></td>
<td><strong>FunctionInfo</strong></td>
<td></td>
<td><strong>Function information</strong></td>
</tr>
</tbody>
</table>

------------------------------------------------------------------------

<a
href="https://github.com/cj-mills/cjm-nbdev-overview/blob/main/cjm_nbdev_overview/parsers.py#L253"
target="_blank" style="float:right; font-size:smaller">source</a>

### parse_class

>  parse_class (node:ast.ClassDef, source_lines:List[str],
>                   is_exported:bool=False)

*Parse a class definition from AST*

<table>
<thead>
<tr>
<th></th>
<th><strong>Type</strong></th>
<th><strong>Default</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>node</td>
<td>ClassDef</td>
<td></td>
<td>AST class node</td>
</tr>
<tr>
<td>source_lines</td>
<td>List</td>
<td></td>
<td>Source code lines</td>
</tr>
<tr>
<td>is_exported</td>
<td>bool</td>
<td>False</td>
<td>Has #| export</td>
</tr>
<tr>
<td><strong>Returns</strong></td>
<td><strong>ClassInfo</strong></td>
<td></td>
<td><strong>Class information</strong></td>
</tr>
</tbody>
</table>

------------------------------------------------------------------------

<a
href="https://github.com/cj-mills/cjm-nbdev-overview/blob/main/cjm_nbdev_overview/parsers.py#L289"
target="_blank" style="float:right; font-size:smaller">source</a>

### parse_variable

>  parse_variable (node:Union[ast.Assign,ast.AnnAssign],
>                      source_lines:List[str], is_exported:bool=False)

*Parse variable assignments from AST*

<table>
<thead>
<tr>
<th></th>
<th><strong>Type</strong></th>
<th><strong>Default</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>node</td>
<td>Union</td>
<td></td>
<td>AST assignment node</td>
</tr>
<tr>
<td>source_lines</td>
<td>List</td>
<td></td>
<td>Source code lines</td>
</tr>
<tr>
<td>is_exported</td>
<td>bool</td>
<td>False</td>
<td>Has #| export</td>
</tr>
<tr>
<td><strong>Returns</strong></td>
<td><strong>List</strong></td>
<td></td>
<td><strong>Variable information</strong></td>
</tr>
</tbody>
</table>

## Notebook Cell Parsing

------------------------------------------------------------------------

<a
href="https://github.com/cj-mills/cjm-nbdev-overview/blob/main/cjm_nbdev_overview/parsers.py#L351"
target="_blank" style="float:right; font-size:smaller">source</a>

### parse_code_cell

>  parse_code_cell (cell:Dict[str,Any])

*Parse a notebook code cell for functions, classes, variables, and
imports*

<table>
<colgroup>
<col style="width: 9%" />
<col style="width: 38%" />
<col style="width: 52%" />
</colgroup>
<thead>
<tr>
<th></th>
<th><strong>Type</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>cell</td>
<td>Dict</td>
<td>Notebook code cell</td>
</tr>
<tr>
<td><strong>Returns</strong></td>
<td><strong>Tuple</strong></td>
<td><strong>(functions, classes, variables, imports)</strong></td>
</tr>
</tbody>
</table>

## Module Parsing

------------------------------------------------------------------------

<a
href="https://github.com/cj-mills/cjm-nbdev-overview/blob/main/cjm_nbdev_overview/parsers.py#L412"
target="_blank" style="float:right; font-size:smaller">source</a>

### parse_notebook

>  parse_notebook (path:pathlib.Path)

*Parse a notebook file for module information*

<table>
<thead>
<tr>
<th></th>
<th><strong>Type</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>path</td>
<td>Path</td>
<td>Path to notebook</td>
</tr>
<tr>
<td><strong>Returns</strong></td>
<td><strong>ModuleInfo</strong></td>
<td><strong>Module information</strong></td>
</tr>
</tbody>
</table>

------------------------------------------------------------------------

<a
href="https://github.com/cj-mills/cjm-nbdev-overview/blob/main/cjm_nbdev_overview/parsers.py#L445"
target="_blank" style="float:right; font-size:smaller">source</a>

### parse_python_file

>  parse_python_file (path:pathlib.Path)

*Parse a Python file for module information*

<table>
<thead>
<tr>
<th></th>
<th><strong>Type</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>path</td>
<td>Path</td>
<td>Path to Python file</td>
</tr>
<tr>
<td><strong>Returns</strong></td>
<td><strong>ModuleInfo</strong></td>
<td><strong>Module information</strong></td>
</tr>
</tbody>
</table>

## Testing

Letâ€™s test the parser on our own notebooks:

``` python
# Test parsing the core module
core_info = parse_notebook(Path("core.ipynb"))
print(f"Module: {core_info.name}")
print(f"Title: {core_info.title}")
print(f"Description: {core_info.description}")
print(f"\nFunctions ({len(core_info.functions)}):")
for func in core_info.functions[:3]:  # Show first 3
    print(f"  - {func.name}")
print(f"\nClasses ({len(core_info.classes)}):")
for cls in core_info.classes[:3]:  # Show first 3
    print(f"  - {cls.name}")
    
print(f"\nTesting refactored parse_class function...")
print("Class signatures:")
for cls in core_info.classes:
    print(f"\n{cls.name}:")
    print(f"  Decorators: {cls.decorators}")
    print(f"  Methods: {[m.name for m in cls.methods]}")
    print(f"  Attributes: {[a.name for a in cls.attributes]}")
    print(f"  Signature: {cls.signature[:100]}...")  # First 100 chars
```

    Module: core
    Title: Core Utilities
    Description: Core utilities and data models for nbdev project overview generation

    Functions (4):
      - get_notebook_files
      - get_subdirectories
      - read_notebook

    Classes (2):
      - NotebookInfo
      - DirectoryInfo

    Testing refactored parse_class function...
    Class signatures:

    NotebookInfo:
      Decorators: ['dataclass']
      Methods: ['relative_path']
      Attributes: ['path', 'name', 'title', 'description', 'export_module']
      Signature: class NotebookInfo:...

    DirectoryInfo:
      Decorators: ['dataclass']
      Methods: ['total_notebook_count']
      Attributes: ['path', 'name', 'notebook_count', 'description', 'subdirs', 'notebooks']
      Signature: class DirectoryInfo:...

``` python
# Test extracting function signatures
print("Function signatures with docments:")
for func in core_info.functions[:2]:
    print(f"\n{func.name}:")
    print(func.signature)
```

    Function signatures with docments:

    get_notebook_files:
    def get_notebook_files(path: Path = None,           # Directory to search (defaults to nbs_path)
                          recursive: bool = True        # Search subdirectories
                          ) -> List[Path]:              # List of notebook paths

    get_subdirectories:
    def get_subdirectories(path: Path = None,           # Directory to search (defaults to nbs_path)
                          recursive: bool = False       # Include all nested subdirectories
                          ) -> List[Path]:              # List of directory paths
